<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pong</title>
    <style>
      *,
      *::after,
      *::before {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }
      body,
      html {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <canvas id="game-canvas"></canvas>

    <script>
      const canvas = document.querySelector("#game-canvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const ctx = canvas.getContext("2d");

      class Ball {
        constructor({ position, velocity }) {
          this.position = position;
          this.velocity = velocity;
          this.radius = 10;
        }

        draw() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.beginPath();
          ctx.arc(
            this.position.x,
            this.position.y,
            this.radius,
            0,
            Math.PI * 2
          );
          ctx.fillStyle = "red";
          ctx.fill();
          ctx.closePath();
        }

        update() {
          this.position.x += this.velocity.dx;
          this.position.y += this.velocity.dy;
          this.draw();
          requestAnimationFrame(() => {
            this.update();
          });
        }
      }

      const ball = new Ball({
        position: { x: 100, y: 100 },
        velocity: { dx: 2, dy: 2 },
      });

      // ball.update();

      class Boundary {
        static color = "blue";
        static side = 50;

        constructor({ position, width, height }) {
          this.position = position;
          this.width = width;
          this.height = height;
        }

        draw() {
          ctx.beginPath();
          ctx.rect(this.position.x, this.position.y, this.width, this.height);
          ctx.fillStyle = Boundary.color;
          ctx.fill();
          ctx.closePath();
        }
      }

      class Net {
        static color = "blue";
        static side = 10;

        constructor({ position, width, height }) {
          this.position = position;
          this.width = width;
          this.height = height;
        }

        draw() {
          ctx.setLineDash([2, 6]); // 10px dash, 5px gap
          ctx.beginPath();
          ctx.rect(this.position.x, this.position.y, this.width, this.height);
          ctx.strokeStyle = Boundary.color;
          ctx.lineWidth = this.width;
          ctx.stroke();
          ctx.closePath();
        }
      }

      let boundaries = [
        new Boundary({
          position: { x: 0, y: 0 },
          width: canvas.width,
          height: Boundary.side,
        }),
        new Boundary({
          position: { x: 0, y: 0 },
          width: Boundary.side,
          height: canvas.height,
        }),
        new Boundary({
          position: { x: canvas.width - Boundary.side, y: 0 },
          width: Boundary.side,
          height: canvas.height,
        }),
        new Boundary({
          position: { x: 0, y: canvas.height - Boundary.side },
          width: canvas.width,
          height: Boundary.side,
        }),
      ];

      const net = new Net({
        position: { x: canvas.width / 2, y: 0 },
        width: 5,
        height: canvas.height,
      });

      boundaries.forEach((boundary) => {
        boundary.draw();
      });
      net.draw();
    </script>
  </body>
</html>
